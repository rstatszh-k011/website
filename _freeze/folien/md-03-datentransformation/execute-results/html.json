{
  "hash": "64762c1708b422dd40dc5217a13baac4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"{{< var md-03.titel >}}\"\nsubtitle: \"{{< var course.long-titel >}}\"\nauthor: \"Lars SchÃ¶bitz\"\ndate: \"2024-10-08\"\ndate-format: \"MMM D, YYYY\"\nformat: \n  revealjs: \n    theme: slides.scss\n    transition: fade\n    slide-number: true\n    chalkboard: true\nfooter: \"[{{< fa link >}} {{< var course.site-short >}}]({{< var course.site >}})\"\neditor: source\nexecute:\n  freeze: auto\nparams:\n    modul: 3\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n\n\n\n\n\n## Lernziele (fÃ¼r diese Woche)\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlernziele <- readr::read_csv(here::here(\"data/tbl-01-rstatszh-k009-lernziele.csv\")) |> \n  dplyr::filter(modul == params$modul) |>\n  dplyr::pull(lernziele)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 34 Columns: 4\nâ”€â”€ Column specification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDelimiter: \",\"\nchr  (2): titel, lernziele\ndbl  (1): modul\ndttm (1): datum\n\nâ„¹ Use `spec()` to retrieve the full column specification for this data.\nâ„¹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n::: {.cell}\n1. Die Lernenden kÃ¶nnen fÃ¼nf Funktionen aus dem R-Paket dplyr anwenden, um eine Teilmenge von Daten zur Verwendung in einer Tabelle oder einem Diagramm zu erzeugen.\n2. Die Lernenden kÃ¶nnen Funktionen aus dem R-Paket dplyr anwenden, um Daten mittels deskriptiver Statistik zusammenzufassen.\n:::\n\n\n\n\n\n\n# Datentransformation mit dplyr  {background-color=\"#4C326A\"}\n\n## Eine Grammatik der Datenmanipulation... {.smaller}\n\n... basierend auf den Konzepten von Funktionen als Verben, die Dataframes manipulieren\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n\n\n\n\n\n\n::: {.cell caption='dplyr is part of the tidyverse'}\n::: {.cell-output-display}\n![](img/md-03/dplyr-part-of-tidyverse.png){width=70%}\n:::\n:::\n\n\n\n\n\n\n:::\n\n::: {.column width=\"60%\"}\n\n- `filter`: wÃ¤hlt Zeilen aus, die den Kriterien entsprechen\n- `arrange`: Zeilen neu ordnen\n- `select`: Spalten nach Namen auswÃ¤hlen\n- `rename`: Spalten umbenennen\n- `mutate`: neue Variablen hinzufÃ¼gen\n- `summarise`: Variablen auf Werte reduzieren\n- `group_by`: fÃ¼r gruppierte Operationen\n- ... (viele mehr)\n:::\n\n::::\n\n## dplyr rules\n\nRegeln der `dplyr`-Funktionen:\n\n::: {.incremental}\n\n- Das erste Argument ist immer ein Dataframe.\n- Nachfolgende Argumente sagen, was mit diesem Dataframe geschehen soll.\n- Gibt immer einen Dataframe zurÃ¼ck.\n- Nichts wird an Ort und Stelle verÃ¤ndert.\n\n:::\n\n## Funktionen & Argumente {auto-animate=\"true\"}\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-4\"}\nlibrary(dplyr)\n\nfilter(.data = gapminder, \n       year == 2007)\n```\n:::\n\n\n\n\n\n\n-   Funktion: `filter()`\n-   Argument: `.data =`\n-   Argumente, die folgen: `year == 2007` [Was ist mit den Daten gemacht wird]{.highlight-yellow}\n\n## Objekte {auto-animate=\"true\"}\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-4\"}\nlibrary(dplyr)\n\ngapminder_2007 <- filter(.data = gapminder, \n                            year == 2007)\n```\n:::\n\n\n\n\n\n\n-   Funktion: `filter()`\n-   Argument: `.data =`\n-   Argumente, die folgen: `year == 2007` [Was ist mit den Daten gemacht wird]{.highlight-yellow}\n-   Daten (Objekt): `gapminder_2007`\n\n## Operatoren {auto-animate=\"true\"}\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-4\"}\nlibrary(dplyr)\n\ngapminder_2007 <- gapminder |> \n  filter(year == 2007) \n```\n:::\n\n\n\n\n\n\n-   Funktion: `filter()`\n-   Argument: `.data =`\n-   Argumente, die folgen: `year == 2007` [Was ist mit den Daten gemacht wird]{.highlight-yellow}\n-   Daten (Objekt): `gapminder_2007`\n-   Zuweisungsoperator: `<-`\n-   Pipe Operator: `|>`\n\n## Grafik {auto-animate=\"true\" .smaller}\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-4,6\"}\nlibrary(dplyr)\n\ngapminder_2007 <- gapminder |> \n  filter(year == 2007) \n\nggplot(data = gapminder_2007,\n       mapping = aes(x = continent,\n                     y = lifeExp,\n                     fill = continent)) +\n  geom_boxplot(outlier.shape = NA) \n```\n\n::: {.cell-output-display}\n![](md-03-datentransformation_files/figure-html/unnamed-chunk-7-1.png){width=384}\n:::\n:::\n\n\n\n\n\n\n# Wir sind dran: Treibhausgasemissionen im Kanton ZÃ¼rich {background-color=\"#4C326A\"}\n\n## Daten {.smallest}\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntreibhausgase <- read_csv(\"daten/ktzh-treibhausgase.csv\")\n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 1980 Columns: 6\nâ”€â”€ Column specification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDelimiter: \",\"\nchr (4): hauptgruppe, untergruppe, thg, thg_agg\ndbl (2): jahr, emission\n\nâ„¹ Use `spec()` to retrieve the full column specification for this data.\nâ„¹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(treibhausgase)\n```\n:::\n\n\n\n\n\n\n<br>\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n| jahr|hauptgruppe         |untergruppe   |thg |thg_agg | emission|\n|----:|:-------------------|:-------------|:---|:-------|--------:|\n| 1990|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n| 1991|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n| 1992|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n| 1993|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n| 1994|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n| 1995|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n\n\n:::\n:::\n\n\n\n\n\n\n<br>\n\n. . .\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nncol(treibhausgase)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 6\n```\n\n\n:::\n:::\n\n\n\n\n\n\n<br>\n\n. . .\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnrow(treibhausgase)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1980\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Data {.smaller .scrollable}\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntreibhausgase |> \n  distinct(hauptgruppe, untergruppe)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|hauptgruppe         |untergruppe                              |\n|:-------------------|:----------------------------------------|\n|Abwasser und Abfall |Abfalldeponie                            |\n|Abwasser und Abfall |Abwasserbehandlung                       |\n|Abwasser und Abfall |Abfallverbrennung                        |\n|Landwirtschaft      |Fermentation bei der Verdauung           |\n|Landwirtschaft      |WirtschaftsdÃ¼nger-Management             |\n|Landwirtschaft      |Landwirtschaftliche BÃ¶den                |\n|Verkehr             |MotorrÃ¤der                               |\n|Verkehr             |Personenwagen                            |\n|Verkehr             |Linien-/Omnibusse                        |\n|Verkehr             |Reisebusse                               |\n|Verkehr             |Lastkraftwagen                           |\n|Verkehr             |Sattelzugmaschinen                       |\n|Landwirtschaft      |Land- und forstwirtschaftliche Maschinen |\n|Industrie           |Industrielle Fahrzeuge und Baumaschinen  |\n|Verkehr             |Schiene                                  |\n|Verkehr             |Schiff                                   |\n|GebÃ¤ude             |Heizkessel Dienstleistungen HeizÃ¶l       |\n|GebÃ¤ude             |Heizkessel Haushalte HeizÃ¶l              |\n|GebÃ¤ude             |Heizkessel Dienstleistungen Gas          |\n|GebÃ¤ude             |Heizkessel Haushalte Gas                 |\n|Abwasser und Abfall |KVA                                      |\n|Industrie           |Industrielle Prozesse nichtenergetisch   |\n|Industrie           |Industrielle Prozesse energetisch        |\n\n\n:::\n:::\n\n\n\n\n\n\n## Wir sind dran: md-03-uebungen\n\n::: task\n1. Ã–ffne [posit.cloud](https://posit.cloud) in deinem Browser (verwende dein Lesezeichen).\n2. Ã–ffne den rstatszh-k009 Arbeitsbereich (Workspace) fÃ¼r den Kurs.\n3. Klicke auf [Continue]{.highlight-yellow} neben [md-03-uebungen]{.highlight-yellow}.\n4. Suche im Dateimanager im Fenster unten rechts die Datei [`01-dplyr-wir.qmd`]{.highlight-yellow} und klicke darauf, um sie im Fenster oben links zu Ã¶ffnen.\n:::\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncountdown(20)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_e8d88eb0\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">20</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n## Pause machen\n\n[Bitte steh auf und beweg dich.]{.highlight-yellow} Lasst eure E-Mails in Frieden ruhen.\n\n![](img/md-03/get-up-and-move.png){width=\"50%\"}\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncountdown(minutes = 10)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_a3789904\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n::: footer\nBild erzeugt mit [DALL-E 3 by OpenAI](https://openai.com/blog/dall-e/)\n:::\n\n## Ihr seid dran: 02-dplyr-ihr.qmd\n\n::: task\n1. Ã–ffne [posit.cloud](https://posit.cloud) in deinem Browser (verwende dein Lesezeichen).\n2. Ã–ffne den rstatszh-k009 Arbeitsbereich (Workspace) fÃ¼r den Kurs.\n3. Klicke auf [Continue]{.highlight-yellow} neben [md-03-uebungen]{.highlight-yellow}.\n4. Suche im Dateimanager im Fenster unten rechts die Datei [`02-dplyr-ihr.qmd`]{.highlight-yellow} und klicke darauf, um sie im Fenster oben links zu Ã¶ffnen.\n5. Folge den Anweisungen in der Datei.\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncountdown(25)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_bd212a9f\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">25</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n## R Terminologie\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n\ntreibhausgase_verkehr <- treibhausgase |> \n    filter(hauptgruppe == \"Verkehr\", jahr == 2022) \n```\n:::\n\n\n\n\n\n\n-   Funktion: `filter()`\n-   Argumente, die folgen: `hauptgruppe == \"Verkehr\"` [Was ist mit den Daten gemacht wird]{.highlight-yellow}\n-   Daten (Objekt): `treibhausgase_verkehr`\n-   Zuweisungsoperator: `<-`\n-   Pipe Operator: `|>`\n\n## Aufgabe: Verbundenes Streudiagram {.scrollable}\n\n\n\n\n\n\n{{< fa thumbs-up >}} GroÃŸartig fÃ¼r Zeitreihendaten {{< fa calendar >}}\n\n\n\n\n\n\n\n\n\n\n::: small\n\n1.  Nutze die Daten treibhausgase_gebaeude und die Funktion `ggplot()`, um ein verbundenmes Streudiagramm mit `geom_point()` und `geom_line()` zu erstellen.\n\nDefiniere folgende visuellen Eigenschaften:\n\n-   jahr auf der x-Achse;\n-   emission auf der y-Achse;\n-   untergruppe zur EinfÃ¤rbung mit dem Argument `color = untergruppe` innerhalb von `aes()`\n\n3.  Ã„ndere die Farben mit `scale_color_colorblind()`.\n\n:::\n\n\n\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\ntreibhausgase |> \n    filter(hauptgruppe == \"GebÃ¤ude\") |> \n    ggplot(aes(x = jahr, y = emission, color = untergruppe)) +\n    geom_point() +\n    geom_path() +\n    scale_color_colorblind()\n```\n\n::: {.cell-output-display}\n![](md-03-datentransformation_files/figure-html/unnamed-chunk-20-1.png){width=100%}\n:::\n:::\n\n\n\n\n\n\n## Wir sind dran: 03-dplyr-wir.qmd\n\n::: task\n1. Ã–ffne [posit.cloud](https://posit.cloud) in deinem Browser (verwende dein Lesezeichen).\n2. Ã–ffne den rstatszh-k009 Arbeitsbereich (Workspace) fÃ¼r den Kurs.\n3. Klicke auf [Continue]{.highlight-yellow} neben [md-03-uebungen]{.highlight-yellow}.\n4. Suche im Dateimanager im Fenster unten rechts die Datei [`03-dplyr-wir.qmd`]{.highlight-yellow} und klicke darauf, um sie im Fenster oben links zu Ã¶ffnen.\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncountdown(25)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_a86de7c1\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">25</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n## Pause machen\n\n[Bitte steh auf und beweg dich.]{.highlight-yellow} Lasst eure E-Mails in Frieden ruhen.\n\n![](img/md-03/get-up-and-move.png){width=\"50%\"}\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncountdown(minutes = 5)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_6db6dc2e\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">05</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n::: footer\nBild erzeugt mit [DALL-E 3 by OpenAI](https://openai.com/blog/dall-e/)\n:::\n\n## Zeitpuffer: 03-dplyr-wir.qmd\n\n::: {.hand-purple-large style=\"text-align: center;\"}\nWelche Konzepte kann ich nochmals erklÃ¤ren?\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncountdown(15)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_c60f9e1a\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">15</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n# Zusatzaufgaben Modul 3 {background-color=\"#4C326A\"}\n\n## Modul 3 Dokumentation\n\n::: learn-more\n[rstatszh-k009.github.io/website/module/md-03.html](https://rstatszh-k009.github.io/website/module/md-03.html)\n\n\n\n\n\n\n```{=html}\n<iframe src=\"https://rstatszh-k009.github.io/website/module/md-03.html\" width=\"100%\" height=\"500\" style=\"border:2px solid #123233;\" title=\"Module 3 Dokumentation\"></iframe>\n```\n\n\n\n\n\n:::\n\n## Zusatzaufgaben Abgabedatum\n\n-   Abgabedatum: [Montag, 14. Oktober]{.highlight-yellow}\n-   Korrektur- und Feedbackphase bis zu: Donnerstag, 17. Oktober \n\n# Danke {background-color=\"#4C326A\"}\n\n## Danke! ðŸŒ» \n\nFolien erstellt mit revealjs und Quarto: https://quarto.org/docs/presentations/revealjs/ \n\nAccess slides als [PDF auf GitHub](https://github.com/rstatszh-k009/website/raw/main/folien/md-03-datentransformation.pdf)\n\nAlle Materialien sind lizenziert unter [Creative Commons Attribution Share Alike 4.0 International](https://creativecommons.org/licenses/by-sa/4.0/).",
    "supporting": [
      "md-03-datentransformation_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.4.0/countdown.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}